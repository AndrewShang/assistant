---

copyright:
  years: 2015, 2018
lastupdated: "2018-02-13"

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:tip: .tip}
{:pre: .pre}
{:codeblock: .codeblock}
{:screen: .screen}
{:javascript: .ph data-hd-programlang='javascript'}
{:java: .ph data-hd-programlang='java'}
{:python: .ph data-hd-programlang='python'}
{:swift: .ph data-hd-programlang='swift'}

# 会話の処理
{: #logs_convo}

ユーザーとワークスペースの間の対話のリストを開くには、ナビゲーション・バーの**「ユーザーの会話 (User conversations)」**を選択します。 **「ユーザーの会話 (User conversations)」**が表示されない場合は、![メニュー](images/Menu_16.png)メニューを使用してページを開きます。
{: shortdesc}

**「ユーザーの会話 (User conversations)」**ページを開くと、デフォルトの表示では、最後の日の結果が最新の結果を先頭にしてリストされます。 該当メッセージで使用された上位インテント (#intent) と認識されたエンティティー (@entity) の値およびメッセージ・テキストが表示されます。 インテントが認識されなかった場合は、*「不適当 (Irrelevant)」*という値が表示されます。 エンティティーが認識されなかった場合や指定されなかった場合は、*「エンティティー不検出 (No entities found)」*という値が表示されます。
![ログのデフォルト・ページ](images/logs_page1.png)

**「ユーザーの会話 (User conversations)」**ページには、ユーザーとワークスペースの間の*発話*の総数が表示されることに注意してください。 発話とは、ユーザーがワークスペースに送信する単一のメッセージです。 一般には、各会話は複数の発話で構成されます。 そのため、この**「ユーザーの会話 (User conversations)」**ページの結果の数は、[「概要」](logs_oview.html)ページに表示される会話の数と異なります。

## ログの制限
{: #log-limits}

メッセージの保持期間は、{{site.data.keyword.conversationshort}} のサービス・プランに応じて異なります。

  サービス・プラン                         | チャット・メッセージの保持期間
  ------------------------------------ | ------------------------------------
  プレミアム                              | 過去 90 日間
  標準                             | 過去 30 日間
  ライト                                 | 過去 7 日間

## データ・ソースの選択
{: #select-source}

**「ユーザーの会話 (User conversations)」**ページにはデフォルトで、現在のワークスペースの発話データが表示されます。ただし、インスタンス内の他のワークスペースに送信された発話を使用してワークスペースを改善する方法が役立つ場合があります。例えば、実動ワークスペースと開発ワークスペースの複数のバージョンがある場合に、これらのワークスペースを同じ発話データを使用して改善することができます。

別のデータソースに切り替えると、{{site.data.keyword.conversationshort}} サービスは、`デプロイメント ID` というエレメントの発話をチェックします。デプロイメント ID は、メッセージ API 呼び出しに追加する {{site.data.keyword.conversationshort}} サービス API の固有 ID です。デプロイメント ID をメッセージ呼び出しに追加する方法については、[ワークスペース間での改善](logs.html#deploy_id)を参照してください。

特定のデプロイメント ID が割り当てられた発話を使用して「改善 (Improve)」セクションにデータを取り込むには、次のようにします。

1.  **「データ・ソース: (Data source:)」**を選択します。
    ![データ・ソース・リンク](images/data_source_1.png)
1.  デプロイメントを選択します。
    ![データ・ソース・リンク](images/data_source_2.png)
1.  **「データの表示 (View Data)」**をクリックします。

選択されたデータ・ソースが表示されます。

**注:** このワークスペースを改善するために使用している発話のソースが**「データ・ソース: (Data source:)」**に表示されますが、ページの上部には変更を適用するワークスペースが引き続き表示されます。

この例では、メッセージ API 呼び出しに `HelpDesk-Production` というデプロイメント ID が含まれている発話が「改善 (Improve)」ページに取り込まれますが、*「テスト入力」*という発話を **#No** というインテントに追加するために**「保存」**をクリックすると、 *「テスト入力」*がワークスペース `HelpDesk-Development` の `#No` の例として追加されます。
![データ・ソース・リンク](images/data_source_3.png)

## 発話のフィルタリング

発話は、*「ユーザーのステートメントを検索 (Search user statements)」*、*「インテント (Intents)」*、*「エンティティー (Entities)」*、および*「過去* n *日 (Last n days)」*でフィルタリングできます。

*ユーザーのステートメントを検索 (Search user statements)* - 検索バーに単語を入力します。 これは、ワークスペースの応答ではなくユーザーの入力を検索します。

*インテント (Intents)* - ドロップダウン・メニューを選択して入力フィールドにインテントを入力するか、インテントが取り込まれたリストから選択します。 インテントは複数選択できます。その場合、結果は、選択したインテントのいずれかによってフィルタリングされます (*「不適当 (Irrelevant)」*も含まれます)。

![「インテント (Intents)」ドロップダウン・メニュー](images/intents_filter.png)

*エンティティー (Entities)* - ドロップダウン・メニューを選択して入力フィールドにエンティティー名を入力するか、エンティティーが取り込まれたリストから選択します。 エンティティーは複数選択できます。その場合、結果は、選択したエンティティーのいずれかによってフィルタリングされます。 インテント*と*エンティティーでフィルタリングすると、結果は両方の値を含むメッセージになります。 また、結果を*「エンティティー不検出 (No entities found)」*でフィルタリングすることもできます。

![「エンティティー (Entities)」ドロップダウン・メニュー](images/entities_filter.png)

発話が更新されるまで少し時間がかかる場合があります。 ユーザーとワークスペースの対話のコンテンツをフィルタリングするには、対話の後に少なくとも 30 分待ってください。

## それぞれの発話を表示する
それぞれの発話のエントリーを展開して、ユーザーが会話全体でどのようなことを言い、ワークスペースがどのように回答したかを確認できます。 これを行うには、**「会話を開く (Open conversation)」**を選択します。 その会話内で選択した発話に自動的に移動します。

![「会話を開く (Open conversation)」パネル](images/open_convo.png)

次に、選択した発話の分類を表示することを選択できます。

![分類を表示した「会話を開く (Open conversation)」パネル](images/open_convo_classes.png)

## インテントの修正

1.  インテントを修正するには、選択した #intent の横にある![「編集」](images/edit_icon.png)編集アイコンを選択します。
1.  表示されたリストから、この入力に対して適切なインテントを選択します。
    - 入力フィールドに入力し始めると、インテントのリストがフィルタリングされます。
    - また、このメニューから**「不適当としてマークを付ける (Mark as irrelevant)」**を選択することもできます (詳細については、[不適当としてマークを付ける](intents.html#mark-irrelevant)を参照してください)。 また、**「インテントのトレーニングをしない (Do not train on intent)」**を選択して、この発話をトレーニングのサンプルとして保存しないようにすることもできます。

    ![インテントを選択する](images/select_intent.png)
1.  **「保存」**を選択します。

    ![インテントを選択する](images/save_intent.png)

    **注**: {{site.data.keyword.conversationshort}} サービスでは、ユーザー入力を*そのまま*例としてインテントに追加できます。インテント・トレーニング・データで例として @entity 参照を使用しており、保存するユーザー発話にトレーニング・データのエンティティー値や同義語が含まれている場合は、後でその発話を編集する必要があります。保存後に、「インテント (Intents)」ページから発話を編集して、参照するエンティティーを置き換えます。詳細については、[インテントの例としての @Entity の直接参照](intents.html#entity-as-example)を参照してください。

## エンティティーの値またはシノニムを追加する

1.  エンティティーの値またはシノニムを追加するには、選択した @entity の横にある![「編集」](images/edit_icon.png)編集アイコンを選択します。
1.  **「エンティティーの追加 (Add entity)」**を選択します。

    ![「エンティティーの追加 (Add entity)」 ](images/add_entity.png)
1.  次に、アンダーラインの付いたユーザー入力の中の単語やフレーズを選択します。

    ![エンティティーを選択する](images/select_entity.png)
1.  強調表示したフレーズを値として追加するエンティティーを選択します。
    - 入力フィールドに入力し始めると、エンティティーと値のリストがフィルタリングされます。
    - 強調表示したフレーズを既存の値のシノニムとして追加するには、ドロップダウン・リストから `@entity:value` を選択します。

    ![エンティティーの単語を追加する](images/add_entity_word.png)
1.  **「保存」**を選択します。

    ![エンティティーを保存する](images/add_entity_save.png)
