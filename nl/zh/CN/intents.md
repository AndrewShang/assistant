---

copyright:
  years: 2015, 2018
lastupdated: "2018-01-30"

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:tip: .tip}
{:pre: .pre}
{:codeblock: .codeblock}
{:screen: .screen}
{:javascript: .ph data-hd-programlang='javascript'}
{:java: .ph data-hd-programlang='java'}
{:python: .ph data-hd-programlang='python'}
{:swift: .ph data-hd-programlang='swift'}

# 定义意向

***意向***是在客户输入中表达的目的或目标，例如回答问题或处理帐单支付。通过识别客户输入中表达的意向，{{site.data.keyword.conversationshort}} 服务可以选择正确的对话流来对其进行响应。
{: shortdesc}

<iframe class="embed-responsive-item" id="youtubeplayer" type="text/html" width="640" height="390" src="https://www.youtube.com/embed/6HAZpBHqX8M" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen> </iframe>

## 意向限制
{: #intent-limits}

可以创建的意向数和示例数取决于 {{site.data.keyword.conversationshort}} 服务套餐：

| 服务套餐         | 每个工作空间的意向数  | 每个工作空间的示例数   |
|------------------|----------------------:|-----------------------:|
| 标准/高级        |                 2,000 |                 25,000 |
| Lite             |                   100 |                 25,000 |

## 创建意向
{: #creating-intents}

使用 {{site.data.keyword.conversationshort}} 工具来创建意向。

1.  在 {{site.data.keyword.conversationshort}} 工具中，打开工作空间，然后选择导航栏中的**意向**选项卡。如果**意向**选项卡未显示，请使用 ![菜单](images/Menu_16.png) 菜单来打开该页面。

1.  选择**新建**。

1.  在**意向名称**字段中，输入意向的名称。
    - 意向名称可以包含字母（Unicode 格式）、数字、下划线、连字符和句点。
    - 名称不能由 `..` 或只包含句点的其他任何字符串组成。
    - 意向名称不能包含空格，并且不能超过 128 个字符。下面是意向名称的示例：
        - `#weather_conditions`
        - `#pay_bill`
        - `#escalate_to_agent`

    工具会在意向名称中自动包含 `#` 字符，因此您不必添加。
    {: tip}

    在**描述**字段中添加意向的描述。

1.  选择**创建意向**以保存意向名称。

    ![显示新意向定义的截屏](images/create_intent.png)

1.  接下来，在**添加用户示例**字段中，输入意向的用户示例的文本。示例可以是最大长度为 1024 个字符的任意字符串。下面是可能的 `#pay_bill` 意向示例：
    - `我需要支付帐单。`
    - `支付帐户余额`
    - `付款`

    **将实体和同义词作为意向示例引用**

    如果已定义或计划定义与此意向对应的实体，请在某些示例中引用实体或其关联的同义词。这样做有助于在意向和实体之间建立关系。

    ![显示意向定义的截屏](images/define_intent.png)
    {: #entity-as-example}

    *重要信息*：

      - 意向示例数据应该是最终用户将提供的数据中具有代表性和典型性的数据。可以从实际的用户数据中收集示例，也可以从您的特定领域的专家收集示例。重要的是数据准确且具有代表性。
      - 培训和测试数据（用于评估目的）都应该反映出在实际使用中意向的分布情况。通常，更频繁的意向具有的示例相对较多，并且响应覆盖范围更好。
      - 可以在示例文本中包含标点符号，条件是这些标点符号是自然出现的。如果您认为有些用户会使用包含标点符号的示例来表达他们的意向，但有些用户不会这样做，请包含有标点符号和无标点符号这两种版本。通常，各种模式的覆盖范围越广，响应越好。

    **直接将 @Entity 作为意向示例引用**

    您还可以选择在意向示例中直接引用实体。例如，假设您有一个名为 `@PhoneModelName` 的实体，其中包含值 *Galaxy S8*、*Moto Z2*、*LG G6* 和 *Google Pixel 2*。在您创建意向（例如，`#order_phone`）时，可以提供培训数据，如下所示：
    - 能为我提供 `@PhoneModelName` 吗？
    - 请帮我订购 `@PhoneModelName`。
    - `@PhoneModelName` 有货吗？
    - 将 `@PhoneModelName` 添加到我的订单。

    ![显示意向定义的截屏](images/define_intent_entity.png)

    **注**：目前，您只能直接引用定义的封闭实体（将忽略模式值）。不能使用[系统实体](system-entities.html)。

    如果选择在培训数据中的*任意位置*将实体作为意向示例（例如，`@PhoneModelName`）引用，那么将取消在其他任何位置的意向示例中使用直接引用的值（例如，*Galaxy S8*）。随后，所有意向都将使用“将实体作为意向示例”的方法；您不能仅为特定意向选择此方法。

    实际上，这意味着如果先前已经基于直接引用 (*Galaxy S8*) 培训了大部分意向，而现在将实体引用 (`@PhoneModelName`) 仅用于一个意向，这会影响您先前的所有培训。如果您确实要选择使用 `@Entity` 引用，那么需要仔细地将所有先前的直接引用都替换为 `@Entity` 引用。

    **注**：使用已定义 10 个值的 `@Entity` 来定义一个示例意向**并不**等同于指定该示例意向 10 次。{{site.data.keyword.conversationshort}} 服务不会为这样的一个示例意向语法授予这么大的权重。

    **重要信息**：应用程序与服务交互时，可能会在 URL 中公开意向名称和示例文本。因此不要在这些工件中包含敏感或个人信息。

    按**添加示例**以保存示例。

1.  重复同一过程以添加更多示例。可以使用 Tab 键在各个示例之间切换。为每个意向至少提供 5 个示例。提供的示例越多，应用程序的准确性就越高。

1.  添加示例完成后，选择 ![关闭箭头](images/close_arrow.png) 以完成创建意向的操作。

### 结果

您创建的意向将添加到“意向”选项卡，然后系统开始对新数据进行自我培训。

## 编辑意向

可以选择列表中的任何意向以将其打开进行编辑。可以进行以下更改：

- 重命名意向。
- 删除意向。
- 添加、编辑或删除示例。
- 将示例移至其他意向。

可以通过 Tab 键从意向名称切换到每个示例，并根据需要编辑示例。

要移动或删除示例，请通过选中示例的对应复选框来选择该示例，然后选择**移动**或**删除**。

  ![显示如何移动或删除示例的截屏](images/move_example.png)

## 搜索意向

使用“搜索”功能查找用户示例、意向名称和描述。

1.  选择导航栏中的**意向**选项卡。

    ![“意向”选项卡概览图](images/intent_oview.png)

1.  选择“搜索”图标：![“搜索”图标](images/search_icon.png)

1.  输入搜索项或搜索短语。

    ![意向搜索项](images/searchint_1.png)

    **注**：第一次搜索时，系统会创建索引；您可能会看到一条消息，要求您稍候，系统正在对内容建立索引。

### 结果

这将显示包含搜索项的意向以及相应的示例。选择任一结果以将其打开进行编辑。

  ![意向搜索返回内容](images/searchint_2.png)

## 导入意向和示例

如果有大量意向和示例，那么您可能会发现通过逗号分隔值 (CSV) 文件导入这些意向和示例比在 {{site.data.keyword.conversationshort}} 工具中逐个对其定义更容易。

1.  将意向和示例收集到 CSV 文件中，或将其从电子表格导出为 CSV 文件。文件中每一行的必需格式如下所示：

    ```
    <example>,<intent>
    ```
    {: screen}

    其中，`<example>` 是用户示例的文本，`<intent>` 是希望示例匹配的意向的名称。例如：

    ```
    告诉我现在的天气状况。,weather_conditions
    下雨了吗？,weather_conditions
    气温多少度？,weather_conditions
    你们最近的门店在哪？,find_location
    你们在罗利有门店吗？,find_location
    ```
    {: screen}

    > **重要信息：**以 UTF-8 编码保存 CSV 文件，并且无字节顺序标记 (BOM)。

1.  在 {{site.data.keyword.conversationshort}} 工具中，打开工作空间，然后选择导航栏中的**意向**选项卡。如果**意向**选项卡未显示，请使用 ![菜单](images/Menu_16.png) 菜单来打开该页面。

1.  选择*导入*图标 ![“导入”图标](images/importGA.png)。然后拖动文件，或浏览以从计算机中选择文件。文件经验证并导入后，系统会开始针对新数据进行自我培训。

    ![“导入”选项](images/ImportIntent.png)

    > **重要信息**：CSV 文件最大不超过 10 MB。如果 CSV 文件大于此值，请考虑将其拆分成多个文件，然后分别导入这些文件。

### 结果

可以在**意向**选项卡上查看导入的意向和对应的示例。您可能需要刷新页面才能看到新意向和示例。

## 导出意向
{: #export_intents}

可以将多个意向导出到一个 CSV 文件中，这样随后可以将这些意向导入并复用于其他 {{site.data.keyword.conversationshort}} 应用程序。

1.  在“意向”选项卡上，从列表中选择所需意向，然后选择*导出*。

    ![“导出”选项](images/ExportIntent.png)

## 删除意向
{: #delete_intents}

可以选择多个意向进行删除。

**重要信息**：通过删除意向，还将删除所有关联的示例，并且以后无法再检索这些项。所有引用这些意向的对话节点都必须手动更新为不再引用已删除的内容。

1.  在“意向”选项卡上，从列表中选择所需意向，然后选择*删除*。

    ![“删除”选项](images/DeleteIntent.png)

## 测试意向
{: #testing-your-intents}

完成创建新意向之后，可以测试系统以了解其是否可按预期识别到您的意向。

1.  在 {{site.data.keyword.conversationshort}} 工具中，选择 ![Ask Watson](images/ask_watson.png) 图标。

1.  在*试用*窗格中，输入问题或其他文本字符串，然后按 Enter 键以查看识别到的意向。如果识别到的意向不正确，那么将此文本作为示例添加到正确的意向，以改进模型。

    如果最近在工作空间中进行过更改，那么可能会看到一条消息，指示系统仍在重新培训。如果看到此消息，请等待培训完成后再进行测试：
    {: tip}

    ![显示重新培训消息的截屏](images/training.png)

    响应指示从输入中识别到的意向。

    ![测试意向的截屏](images/test_intents.png)

1.  如果系统未识别到正确的意向，您可以对其进行更正。要更正识别的意向，请选择显示的意向，然后从列表中选择正确的意向。提交更正后，系统会自动重新自我培训以包含新数据。

    ![更正已识别意向的截屏](images/correct_intent.png)

1.  如果输入与应用程序无关，那么可以进行相应指示。选择显示的意向，然后选择**标记为不相关**。

    ![“标记为不相关”截屏](images/irrelevant.png)

如果未正确识别意向，请考虑进行以下类型的更改：

- 将未识别到的文本作为示例添加到正确的意向。
- 将现有示例从一个意向移动到另一个意向。
- 考虑意向是否太类似，然后视情形对其进行重新定义。

## 绝对评分和标记为不相关

自 2017 年 2 月开始，提供了一个用于意向置信度评分和返回意向的新算法。还可以将输入标记为*不相关*。这些更改可能需要[升级工作空间 ![外部链接图标](../../icons/launch-glyph.svg "外部链接图标")](upgrading.html){: new_window}。

### 绝对评分

现在，{{site.data.keyword.conversationshort}} 服务会对每个意向的置信度单独评分，而不与其他意向相关。这样就能灵活地返回多个意向。同时，这也意味着系统可能根本不返回意向。如果最热门意向的置信度较低，使得任何意向都可与用户的输入相关（小于 0.2），那么虽然 API 仍会将其包含在意向数组输出中，但以该 #intent 为条件将返回 false。如果要检测没有检测到具有良好置信度的任何意向的情况，您可以`不相关`为条件。

意向置信度分数更改时，对话可能需要重构。例如，如果使用现在具有低置信度的意向对对话设置了条件，那么系统的响应将不再正确。

### 标记为不相关
{: #mark-irrelevant}

有关此功能的可用性，请参阅[支持的语言](lang-support.html)。

升级工作空间后，可以在*试用*窗格中[测试输入](#testing-your-intents)以查看更改。可以使用**标记为不相关**来指示输入与应用程序无关。

如果有一个意向（例如，#off_topic）用于超出范围或偏离主题的输入，请删除该意向，并通过将输入标记为不相关来测试工作空间。

**重要信息**：标记为不相关的输入会存储在工作空间中，并且包含为培训数据的一部分。请确保您要进行此更改。

- 日后在工具中会无法访问或更改这些输入。
- 除去**不相关**标记的唯一方法是在*试用*窗格中使用相同的输入，然后更改意向。
